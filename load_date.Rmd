---
title: "Untitled"
output: html_document
date: "`r Sys.Date()`"
---

```{r setup, include=FALSE}
library(dplyr)
library(purrr)
library(stringr)  

data_directory <- "data/birth_rate"

csv_files <- list.files(path = data_directory, pattern = "*.csv", full.names = TRUE)

read_and_clean_csv <- function(file) {
  country_name <- gsub("_birth_rate.csv", "", basename(file))
  country_name <- gsub("-", " ", country_name)  
  country_name <- str_to_title(country_name)
  
  df <- read.csv(file, stringsAsFactors = FALSE, sep = ",")
  df$country_name <- country_name
  
  return(df)
}

list_of_dfs <- map(csv_files, read_and_clean_csv)

combined_data <- bind_rows(list_of_dfs)

print(combined_data)
print(tail(combined_data, 500))


```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:



## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
